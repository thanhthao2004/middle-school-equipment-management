<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Danh Sách Người Dùng</title>
  <link rel="stylesheet" href="/public/stylesheets/style.css">
  <style>
    .sidebar {
      width: 270px;
      background: #2196f3;
      color: #fff;
      height: 100vh;
      float: left;
      padding: 0;
      box-sizing: border-box;
      border-right: 1px solid #97c5f5;
    }
    .sidebar h3 {
      padding: 32px 0 14px 28px;
      margin: 0; font-size: 17px;
      font-weight: 500;
      letter-spacing: 0.5px;
    }
    .sidebar .nav-section { margin-bottom: 18px; }
    .sidebar a { display:block;color:#fff;text-decoration:none;font-size:15px;padding:15px 0 15px 35px;margin:0 0 2px 0;border-left:4px solid transparent;transition:background .13s, border .13s; }
    .sidebar a.active, .sidebar a:focus { background:#156dc5;border-left:4px solid #fff; }
    .sidebar a:hover { background:#1976d2; }
    .main { margin-left:270px;padding:0;min-height:100vh; }
    .toolbar { display:flex; align-items:center; justify-content:space-between; gap:12px; margin: 10px 0; }
    .searchbox { display:flex; align-items:center; gap:8px; }
    .searchbox input { padding:8px 10px; border:1px solid #dee2e6; border-radius:6px; min-width:260px; }
    .actions a, .actions form button { margin-right:6px; font-size:13px; }
    .actions .view { color:#0d6efd; text-decoration:underline; }
    .card { background:#fff; border:1px solid #dee2e6; border-radius:12px; box-shadow:0 8px 24px rgba(2,6,23,.06); padding:16px; }
    .card-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
    .card-title { font-weight:700; color:#495057; margin:0; }
    .tbody tr td { text-align: center; }
    /* Vertical separators for table columns */
    table.equipment-table th, table.equipment-table td { border-right: 1px solid #dee2e6; }
    table.equipment-table th:last-child, table.equipment-table td:last-child { border-right: none; }
  </style>
</head>
<body>
<div class="sidebar">
  <h3>Bảng chọn</h3>
  <div class="nav-section">
    <a href="/users/create">Tạo Tài Khoản</a>
  </div>
  <div class="nav-section">
    <a class="active" href="/users">Quản Lí Tài Khoản</a>
  </div>
</div>
<div class="main">
  <h2 style="color:#495057; text-align:center; margin-top:16px;">Danh Sách Người Dùng</h2>
  <div class="toolbar">
    <div></div>
    <div class="searchbox">
      <form method="GET" action="/users" style="display:flex; gap:8px;">
        <input type="text" name="q" placeholder="Tìm kiếm..." value="<%= typeof q !== 'undefined' ? q : '' %>">
        <button class="btn btn-register" type="submit">Tìm kiếm</button>
      </form>
    </div>
  </div>
  <div class="card" style="margin: 8px 16px 24px;">
    <div class="card-header">
      <h3 class="card-title">Danh sách tài khoản</h3>
      <a class="btn btn-register" href="/users/create">+ Tạo tài khoản mới</a>
    </div>
    <div style="overflow-x:auto;">
      <table class="equipment-table" border="0" cellspacing="0" cellpadding="8" style="width:100%; min-width:900px; background:#fff; border-radius:8px;">
        <thead>
          <tr style="background-color:#f8f9fa; color:#495057;">
            <th width="6%">ID</th>
            <th width="18%">Họ và tên</th>
            <th width="14%">Tên đăng nhập</th>
            <th width="12%">Chức vụ</th>
            <th width="12%">Số điện thoại</th>
            <th width="10%">Năm KN</th>
            <th width="10%">Giới tính</th>
            <th width="10%">Bộ môn</th>
            <th width="8%">Lựa chọn</th>
          </tr>
        </thead>
        <tbody class="tbody">
          <% if (users && users.length > 0) { %>
            <% users.forEach(function(u) { %>
            <tr>
              <td><%= u.id %></td>
              <td><%= u.fullname %></td>
              <td><%= u.username %></td>
              <td><%= u.role %></td>
              <td><%= u.phone %></td>
              <td><%= u.experience %></td>
              <td><%= u.gender %></td>
              <td><%= u.subject %></td>
              <td class="actions">
                <a class="view" href="/users/<%= u.id %>">xem</a>
              </td>
            </tr>
            <% }); %>
          <% } else { %>
            <tr><td colspan="9" style="text-align:center; color:#6c757d">Chưa có người dùng nào.</td></tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>
</body>
</html>
