<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Thông Tin Người Dùng</title>
  <link rel="stylesheet" href="/public/stylesheets/style.css">
  <style>
    .sidebar { width:270px; background:#2196f3; color:#fff; height:100vh; float:left; padding:0; box-sizing:border-box; border-right:1px solid #97c5f5; }
    .sidebar h3 { padding:32px 0 14px 28px; margin:0; font-size:17px; font-weight:500; letter-spacing:.5px; }
    .sidebar a { display:block; color:#fff; text-decoration:none; font-size:15px; padding:15px 0 15px 35px; margin:0 0 2px 0; border-left:4px solid transparent; }
    .sidebar a.active, .sidebar a:focus { background:#156dc5; border-left:4px solid #fff; }
    .sidebar a:hover { background:#1976d2 }
    .main { margin-left:270px; padding:0; min-height:100vh; }
    .page-title { font-size:22px; font-weight:700; color:#212529; margin:24px 0 12px 100px; }
    .box { width:820px; margin:0 auto 60px; background:#fff; border:1px solid #dee2e6; border-radius:8px; padding:24px 28px; }
    .row { margin-bottom:14px; }
    label { display:block; margin-bottom:4px; font-weight:500; }
    input[type=text], input[type=password], input[type=date], select { width:100%; padding:9px 12px; border:1px solid #b7c2d6; border-radius:5px; background:#fafdff; }
    .flex2 { display:flex; gap:14px; }
    .flex2 > div { flex:1 }
    .actions { display:flex; justify-content:flex-end; gap:10px; margin-top:18px; }
    .btn-gray { background:#6c757d; color:#fff; border:none; padding:10px 16px; border-radius:6px; }
    .btn-danger { background:#dc3545; color:#fff; border:none; padding:10px 16px; border-radius:6px; }
    .btn-primary { background:#007bff; color:#fff; border:none; padding:10px 16px; border-radius:6px; transition: background-color .18s ease, box-shadow .18s ease; }
    a, .actions a { text-decoration: none; }
    .btn-primary:hover { background:#0056b3; box-shadow: 0 4px 12px rgba(0,0,0,.12); color:#fff; }
    .btn-gray:hover { color:#fff; opacity:.95; box-shadow: 0 4px 12px rgba(0,0,0,.08); }
  </style>
</head>
<body>
  <div class="sidebar">
    <h3>Bảng chọn</h3>
    <a href="/users/create">Tạo Tài Khoản</a>
    <a class="active" href="/users">Quản Lí Tài Khoản</a>
  </div>
  <div class="main">
    <div class="page-title">Thông Tin Người Dùng</div>
    <div class="box">
      <% if (error) { %>
        <div style="color:#dc3545; background:#fdeaea; border:1px solid #dc3545; border-radius:5px; padding:8px 15px; margin-bottom:16px; font-weight:bold;">
          <%= error %>
        </div>
      <% } %>
      <form action="/users/<%= user.id %>/edit" method="POST">
        <div class="row">
          <label>Họ và tên:</label>
          <input type="text" name="fullname" value="<%= user.fullname || '' %>" class="<%= errors && errors.fullname ? 'invalid' : '' %>">
          <div style="color:#dc3545; font-size:13px; margin:3px 0 0 2px; min-height:17px;"><%= errors && errors.fullname ? errors.fullname : '' %></div>
        </div>
        <div class="row">
          <label>Số điện thoại:</label>
          <input type="text" name="phone" value="<%= user.phone || '' %>" class="<%= errors && errors.phone ? 'invalid' : '' %>">
          <div style="color:#dc3545; font-size:13px; margin:3px 0 0 2px; min-height:17px;"><%= errors && errors.phone ? errors.phone : '' %></div>
        </div>
        <div class="row">
          <label>Địa chỉ:</label>
          <input type="text" name="address" value="<%= user.address || '' %>">
        </div>
        <div class="row">
          <label>Tên Người Dùng:</label>
          <input type="text" name="username" value="<%= user.username || '' %>">
        </div>
        <div class="row flex2">
          <div>
            <label>Chức vụ:</label>
            <select name="role">
              <option value="Hiệu trưởng" <%= user.roleDisplay==='Hiệu trưởng' ? 'selected' : '' %> <%= hasAnotherPrincipal && user.role !== 'principal' ? 'disabled' : '' %>>Hiệu Trưởng<%= hasAnotherPrincipal && user.role !== 'principal' ? ' (Đã có)' : '' %></option>
              <option value="Giáo viên" <%= user.roleDisplay==='Giáo viên' ? 'selected' : '' %>>Giáo Viên</option>
              <option value="Nhân viên" <%= user.roleDisplay==='Nhân viên' ? 'selected' : '' %>>Nhân Viên</option>
            </select>
          </div>
          <div>
            <label>Năm Kinh Nghiệm:</label>
            <select name="experience">
              <option value="1 năm" <%= user.experience==='1 năm' ? 'selected' : '' %>>1 năm</option>
              <option value="2 năm" <%= user.experience==='2 năm' ? 'selected' : '' %>>2 năm</option>
              <option value="3 năm" <%= user.experience==='3 năm' ? 'selected' : '' %>>3 năm</option>
              <option value="Trên 5 năm" <%= user.experience==='Trên 5 năm' ? 'selected' : '' %>>Trên 5 năm</option>
            </select>
          </div>
        </div>
        <div class="row">
          <label>Trình độ chuyên môn:</label>
          <input type="text" name="specialization" value="<%= user.specialization || '' %>">
        </div>
        <div class="row">
          <label>Giới Tính:</label>
          <input type="radio" id="gioitinhnam" name="gender" value="Nam" <%= user.gender==='Nam' ? 'checked' : '' %>> <label for="gioitinhnam" style="display:inline;font-weight:400">Nam</label>
          <input type="radio" id="gioitinhn" name="gender" value="Nữ" <%= user.gender==='Nữ' ? 'checked' : '' %>> <label for="gioitinhn" style="display:inline;font-weight:400">Nữ</label>
        </div>
        <div class="row flex2">
          <div>
            <label>Bộ môn (nếu có):</label>
            <select name="subject">
              <option value="Không" <%= user.subject==='Không' ? 'selected' : '' %>>Không</option>
              <option value="Toán" <%= user.subject==='Toán' ? 'selected' : '' %>>Toán</option>
              <option value="Văn" <%= user.subject==='Văn' ? 'selected' : '' %>>Văn</option>
              <option value="Anh" <%= user.subject==='Anh' ? 'selected' : '' %>>Anh</option>
            </select>
          </div>
          <div>
            <label>Ngày sinh:</label>
            <input type="date" name="dob" value="<%= user.dob || '' %>">
          </div>
        </div>
        <div class="actions">
          <a class="btn-gray" href="/users/<%= user.id %>">Quay lại</a>
          <button class="btn-primary" type="submit">Lưu</button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
